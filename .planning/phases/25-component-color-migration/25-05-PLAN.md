---
phase: 25-component-color-migration
plan: 05
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/admin/collection/activity-feed.tsx
  - apps/web/src/components/admin/collection/collection-history.tsx
  - apps/web/src/components/admin/collection/history-panel.tsx
  - apps/web/src/components/admin/collection/log-detail-modal.tsx
  - apps/web/src/components/admin/collection/recent-logs-sidebar.tsx
  - apps/web/src/components/admin/collection/pipeline-feed.tsx
  - apps/web/src/components/admin/collection/run-config-modal.tsx
  - apps/web/src/components/admin/collection/schedule-config.tsx
  - apps/web/src/components/admin/collection/metrics-panel.tsx
  - apps/web/src/components/admin/collection/metrics-summary.tsx
  - apps/web/src/components/admin/collection/progress-bar.tsx
  - apps/web/src/components/admin/collection/progress-detail-modal.tsx
  - apps/web/src/components/admin/collection/amazon-category-selector.tsx
  - apps/web/src/components/admin/collection/category-preset-dropdown.tsx
autonomous: true

must_haves:
  truths:
    - "All collection history, metrics, config, and progress components render correctly in all 4 themes"
    - "No hardcoded gray-* classes remain in any of these 14 collection files"
    - "Log timestamps, metrics values, and progress percentages display in monospace"
    - "Activity feed and pipeline feed items adapt to theme colors"
    - "Progress bars use theme-aware colors"
  artifacts:
    - path: "apps/web/src/components/admin/collection/activity-feed.tsx"
      provides: "Migrated activity feed with semantic colors"
    - path: "apps/web/src/components/admin/collection/progress-bar.tsx"
      provides: "Migrated progress bar with theme-aware colors"
    - path: "apps/web/src/components/admin/collection/metrics-summary.tsx"
      provides: "Migrated metrics display with monospace values"
  key_links:
    - from: "collection/*.tsx"
      to: "globals.css semantic tokens"
      via: "Tailwind utility classes"
      pattern: "text-foreground|bg-muted|bg-card|border-border"
---

<objective>
Migrate 14 admin collection component files (history, metrics, config, progress) from hardcoded gray-* classes to semantic tokens, with monospace data formatting for metrics and timestamps.

Purpose: Collection components form the operational dashboard for eBay seller data gathering. These include activity feeds, log viewers, metrics displays, and configuration modals — all data-heavy interfaces that benefit from both theming and monospace formatting.
Output: 14 collection component files fully migrated to semantic tokens.
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/25-component-color-migration/25-CONTEXT.md
@.planning/phases/25-component-color-migration/25-RESEARCH.md
@apps/web/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate collection history, feed, and log components</name>
  <files>
    apps/web/src/components/admin/collection/activity-feed.tsx
    apps/web/src/components/admin/collection/collection-history.tsx
    apps/web/src/components/admin/collection/history-panel.tsx
    apps/web/src/components/admin/collection/log-detail-modal.tsx
    apps/web/src/components/admin/collection/recent-logs-sidebar.tsx
    apps/web/src/components/admin/collection/pipeline-feed.tsx
  </files>
  <action>
    Migrate all hardcoded gray-* classes to semantic tokens in these 6 files (~83 occurrences total).

    Apply standard mappings:
    - Feed item backgrounds → `bg-card` or `bg-background`
    - Feed item hover → `hover:bg-accent`
    - Feed item borders/dividers → `border-border` or `divide-border`
    - Timestamps → `text-muted-foreground`
    - Primary feed text → `text-foreground`
    - Log content/details → `text-foreground` for main, `text-muted-foreground` for metadata
    - Sidebar backgrounds → `bg-muted` or `bg-card`
    - Modal surfaces → `bg-card` or `bg-background`

    Special considerations:
    - **activity-feed.tsx** (~14 occurrences): Timeline-style feed with activity items. Each item likely has timestamp, action description, and status indicator. Timestamps → `font-mono text-sm`. Action types/event names → could benefit from `font-mono` for consistency.
    - **collection-history.tsx** (~21 occurrences): History list/table showing past collection runs. Run IDs, timestamps, item counts, durations → monospace pills. Status (success/failed/partial) → theme-harmonized badges.
    - **history-panel.tsx** (~14 occurrences): Panel wrapper for history content. Section headers → `text-foreground`. Panel bg → `bg-card`.
    - **log-detail-modal.tsx** (~19 occurrences): Detailed log viewer — log content should use `font-mono` for the entire log output block (like a terminal). Log levels (ERROR, WARN, INFO) → use appropriate semantic colors (destructive for errors, chart-4 for warnings).
    - **recent-logs-sidebar.tsx** (~8 occurrences): Sidebar list of recent logs. Log timestamps → `font-mono text-sm`.
    - **pipeline-feed.tsx** (~7 occurrences): Pipeline stage indicators. Stage names → `text-foreground`. Progress/status → theme-harmonized.

    Apply monospace data formatting:
    - All timestamps throughout → `font-mono text-sm`
    - Run IDs, collection IDs → `font-mono text-sm px-1.5 py-0.5 rounded bg-primary/10`
    - Item counts, durations → `font-mono`
    - Log output blocks → `font-mono text-sm bg-muted p-3 rounded` (terminal-like appearance)

    **DO NOT:**
    - Change timeline/feed layout structure
    - Modify log parsing or filtering logic
    - Break real-time log streaming if present
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/admin/collection/activity-feed.tsx apps/web/src/components/admin/collection/collection-history.tsx apps/web/src/components/admin/collection/history-panel.tsx apps/web/src/components/admin/collection/log-detail-modal.tsx apps/web/src/components/admin/collection/recent-logs-sidebar.tsx apps/web/src/components/admin/collection/pipeline-feed.tsx`
    All counts should be 0.
  </verify>
  <done>Zero gray-* classes in all 6 history/feed/log files. Timestamps use monospace. Log output blocks have terminal-like styling with semantic colors. Status indicators are theme-harmonized.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate collection config, metrics, and progress components</name>
  <files>
    apps/web/src/components/admin/collection/run-config-modal.tsx
    apps/web/src/components/admin/collection/schedule-config.tsx
    apps/web/src/components/admin/collection/metrics-panel.tsx
    apps/web/src/components/admin/collection/metrics-summary.tsx
    apps/web/src/components/admin/collection/progress-bar.tsx
    apps/web/src/components/admin/collection/progress-detail-modal.tsx
    apps/web/src/components/admin/collection/amazon-category-selector.tsx
    apps/web/src/components/admin/collection/category-preset-dropdown.tsx
  </files>
  <action>
    Migrate all hardcoded gray-* classes to semantic tokens in these 8 files (~94 occurrences total).

    Apply standard mappings:
    - Modal/dialog surfaces → `bg-card` or `bg-background`
    - Form labels → `text-foreground`
    - Form helper text → `text-muted-foreground`
    - Input borders → `border-input`
    - Section backgrounds → `bg-muted`
    - Dropdown item hover → `hover:bg-accent`
    - Metric value text → `text-foreground`
    - Metric label text → `text-muted-foreground`

    Special considerations:
    - **run-config-modal.tsx** (~14 occurrences): Collection run configuration form. Config values that are numeric → `font-mono`.
    - **schedule-config.tsx** (~19 occurrences): Cron/schedule configuration. Cron expressions, time values → `font-mono text-sm px-1.5 py-0.5 rounded bg-primary/10`. Schedule intervals → `font-mono`.
    - **metrics-panel.tsx** (~8 occurrences): Metrics display panel. All metric values (counts, rates, percentages) → `font-mono`. Panel bg → `bg-card`.
    - **metrics-summary.tsx** (~9 occurrences): Summary statistics. All numeric values → `font-mono text-sm px-1.5 py-0.5 rounded bg-primary/10`. Summary cards → `bg-card border-border`.
    - **progress-bar.tsx** (~18 occurrences): Progress visualization. Progress fill → use `bg-primary` (adapts per theme). Track → `bg-muted`. Percentage text → `font-mono`. The progress bar should look distinct in each theme.
    - **progress-detail-modal.tsx** (~7 occurrences): Detailed progress breakdown. Progress values → `font-mono`. Status indicators → theme-harmonized.
    - **amazon-category-selector.tsx** (~13 occurrences): Category tree/list selector. Category names → `text-foreground`. Selected state → `bg-accent text-accent-foreground`. Category counts → `font-mono text-sm`.
    - **category-preset-dropdown.tsx** (~6 occurrences): Dropdown of preset categories. Item hover → `hover:bg-accent`. Preset names → `text-foreground`.

    Apply monospace formatting:
    - All numeric metric values → `font-mono`
    - Percentages → `font-mono`
    - Cron expressions and schedule times → monospace pills
    - Item counts in category selector → `font-mono text-sm`

    **DO NOT:**
    - Change progress bar animation or transition behavior
    - Modify cron/schedule parsing logic
    - Break category tree expand/collapse behavior
    - Change dropdown positioning or z-index
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/admin/collection/run-config-modal.tsx apps/web/src/components/admin/collection/schedule-config.tsx apps/web/src/components/admin/collection/metrics-panel.tsx apps/web/src/components/admin/collection/metrics-summary.tsx apps/web/src/components/admin/collection/progress-bar.tsx apps/web/src/components/admin/collection/progress-detail-modal.tsx apps/web/src/components/admin/collection/amazon-category-selector.tsx apps/web/src/components/admin/collection/category-preset-dropdown.tsx`
    All counts should be 0.
  </verify>
  <done>Zero gray-* classes in all 8 config/metrics/progress files. Metric values use monospace with pills. Progress bars use theme-aware primary color. Category selectors use accent for selected state. Config forms use semantic token input styling.</done>
</task>

</tasks>

<verification>
1. `grep -rn "gray-" apps/web/src/components/admin/collection/activity-feed.tsx apps/web/src/components/admin/collection/collection-history.tsx apps/web/src/components/admin/collection/history-panel.tsx apps/web/src/components/admin/collection/log-detail-modal.tsx apps/web/src/components/admin/collection/recent-logs-sidebar.tsx apps/web/src/components/admin/collection/pipeline-feed.tsx apps/web/src/components/admin/collection/run-config-modal.tsx apps/web/src/components/admin/collection/schedule-config.tsx apps/web/src/components/admin/collection/metrics-panel.tsx apps/web/src/components/admin/collection/metrics-summary.tsx apps/web/src/components/admin/collection/progress-bar.tsx apps/web/src/components/admin/collection/progress-detail-modal.tsx apps/web/src/components/admin/collection/amazon-category-selector.tsx apps/web/src/components/admin/collection/category-preset-dropdown.tsx` — returns no results
2. `npx tsc --noEmit` passes
</verification>

<success_criteria>
- All 14 collection component files have zero hardcoded gray-* classes
- Metric values and timestamps use monospace formatting
- Progress bars use theme-aware colors (bg-primary fill, bg-muted track)
- Log output blocks have terminal-like monospace styling
- Activity and pipeline feeds adapt to all 4 themes
- No functional regressions in config modals, metric displays, or progress tracking
</success_criteria>

<output>
After completion, create `.planning/phases/25-component-color-migration/25-05-SUMMARY.md`
</output>
