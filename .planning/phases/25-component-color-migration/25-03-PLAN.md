---
phase: 25-component-color-migration
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/admin/accounts-table.tsx
  - apps/web/src/components/admin/users-table.tsx
  - apps/web/src/components/admin/department-roles-table.tsx
  - apps/web/src/components/admin/invites-list.tsx
  - apps/web/src/components/admin/account-dialog.tsx
  - apps/web/src/components/admin/user-edit-dialog.tsx
  - apps/web/src/components/admin/department-role-dialog.tsx
  - apps/web/src/components/admin/invite-dialog.tsx
  - apps/web/src/components/admin/create-invite-form.tsx
  - apps/web/src/components/admin/transfer-ownership-dialog.tsx
autonomous: true

must_haves:
  truths:
    - "All admin core tables render with correct colors in all 4 themes"
    - "No hardcoded gray-* classes remain in admin core table or dialog files"
    - "Data values in admin tables (user IDs, emails, dates) display in monospace"
    - "Dialog forms use semantic tokens for labels, inputs, and helper text"
    - "Table row hover states are visually distinct"
  artifacts:
    - path: "apps/web/src/components/admin/accounts-table.tsx"
      provides: "Migrated accounts table with semantic colors and monospace data"
    - path: "apps/web/src/components/admin/users-table.tsx"
      provides: "Migrated users table with semantic colors and monospace data"
  key_links:
    - from: "admin/*-table.tsx"
      to: "globals.css semantic tokens"
      via: "Tailwind utility classes"
      pattern: "text-foreground|bg-muted|border-border|hover:bg-table-row-hover"
---

<objective>
Migrate 10 admin core component files (tables + dialogs) from hardcoded gray-* classes to semantic tokens, with monospace data formatting for tabular data values.

Purpose: Admin core components (accounts, users, department roles, invites) are the primary management interfaces. Tables display critical data that benefits from monospace formatting for scannability.
Output: 10 admin core files fully migrated to semantic tokens.
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/25-component-color-migration/25-CONTEXT.md
@.planning/phases/25-component-color-migration/25-RESEARCH.md
@apps/web/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate admin table components to semantic tokens</name>
  <files>
    apps/web/src/components/admin/accounts-table.tsx
    apps/web/src/components/admin/users-table.tsx
    apps/web/src/components/admin/department-roles-table.tsx
    apps/web/src/components/admin/invites-list.tsx
  </files>
  <action>
    Migrate all hardcoded gray-* classes to semantic tokens in these 4 table files (~77 occurrences total).

    Apply standard mappings contextually:
    - Primary text (names, titles) → `text-foreground`
    - Secondary text (descriptions, metadata, timestamps) → `text-muted-foreground`
    - Table header backgrounds → `bg-table-header-bg` (custom token) or `bg-muted`
    - Table row hover → `hover:bg-table-row-hover` (custom token)
    - Table borders → `border-table-border` (custom token) or `border-border`
    - Dividers → `divide-border`
    - Interactive hover states → `hover:bg-accent`

    Apply monospace data formatting:
    - **accounts-table.tsx**: Account IDs, account numbers get `font-mono text-sm px-1.5 py-0.5 rounded bg-primary/10`. Table headers for data columns get `font-mono`.
    - **users-table.tsx**: Email addresses, user IDs, join dates get monospace treatment. Email columns use `font-mono` for header + cells.
    - **department-roles-table.tsx**: Permission key lists get `font-mono`. Role counts get monospace pill.
    - **invites-list.tsx**: Invite codes, email addresses, expiry dates get monospace. Status indicators should use existing Badge component variants.

    Apply status badge theming:
    - Active/enabled status → `bg-primary/20 text-primary` or use Badge variant="default"
    - Inactive/disabled → `bg-muted text-muted-foreground` or Badge variant="secondary"
    - Error/expired → `bg-destructive/20 text-destructive` or Badge variant="destructive"

    **DO NOT:**
    - Create new status color tokens — use existing semantic tokens with opacity modifiers
    - Change table column ordering or layout
    - Modify sorting or filtering logic
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/admin/accounts-table.tsx apps/web/src/components/admin/users-table.tsx apps/web/src/components/admin/department-roles-table.tsx apps/web/src/components/admin/invites-list.tsx`
    All counts should be 0.
    Run: `grep -c "font-mono" apps/web/src/components/admin/users-table.tsx`
    Should show >= 2 matches (email column, date column).
  </verify>
  <done>Zero gray-* classes in all 4 admin table files. Data columns use monospace formatting with pills. Status indicators use theme-harmonized semantic tokens.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate admin dialog and form components to semantic tokens</name>
  <files>
    apps/web/src/components/admin/account-dialog.tsx
    apps/web/src/components/admin/user-edit-dialog.tsx
    apps/web/src/components/admin/department-role-dialog.tsx
    apps/web/src/components/admin/invite-dialog.tsx
    apps/web/src/components/admin/create-invite-form.tsx
    apps/web/src/components/admin/transfer-ownership-dialog.tsx
  </files>
  <action>
    Migrate all hardcoded gray-* classes to semantic tokens in these 6 dialog/form files (~80 occurrences total).

    Apply standard mappings for form/dialog patterns:
    - Dialog overlay/backdrop → keep existing or use `bg-background/80`
    - Dialog surface → `bg-card` or `bg-background`
    - Dialog title → `text-foreground`
    - Dialog description → `text-muted-foreground`
    - Form labels → `text-foreground` (or `text-muted-foreground` if subordinate to field value)
    - Form input borders → `border-input`
    - Form helper/hint text → `text-muted-foreground`
    - Form error text → `text-destructive`
    - Section dividers → `border-border`
    - Disabled inputs → `bg-muted text-muted-foreground`

    Special considerations:
    - **account-dialog.tsx** (~22 occurrences): Account creation/edit form — likely has many form field colors
    - **department-role-dialog.tsx** (~22 occurrences): Permission key checkboxes and role configuration — permission keys should use `font-mono` styling
    - **user-edit-dialog.tsx** (~18 occurrences): User profile editing form
    - **transfer-ownership-dialog.tsx** (~6 occurrences): Confirmation dialog with warning styling — preserve destructive/warning emphasis
    - **invite-dialog.tsx** (~8 occurrences): Invite creation dialog
    - **create-invite-form.tsx** (~4 occurrences): Inline invite form

    Apply monospace formatting:
    - Permission keys in department-role-dialog → `font-mono text-sm px-1.5 py-0.5 rounded bg-primary/10`
    - Email addresses displayed in dialogs → `font-mono`
    - Any ID or code values shown in dialogs → monospace pill

    **DO NOT:**
    - Change dialog open/close behavior
    - Modify form validation logic
    - Change button variants (use existing shadcn/ui Button component variants)
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/admin/account-dialog.tsx apps/web/src/components/admin/user-edit-dialog.tsx apps/web/src/components/admin/department-role-dialog.tsx apps/web/src/components/admin/invite-dialog.tsx apps/web/src/components/admin/create-invite-form.tsx apps/web/src/components/admin/transfer-ownership-dialog.tsx`
    All counts should be 0.
  </verify>
  <done>Zero gray-* classes in all 6 admin dialog/form files. Permission keys use monospace. Form labels and inputs use semantic tokens. Warning/destructive emphasis preserved.</done>
</task>

</tasks>

<verification>
1. `grep -rn "gray-" apps/web/src/components/admin/accounts-table.tsx apps/web/src/components/admin/users-table.tsx apps/web/src/components/admin/department-roles-table.tsx apps/web/src/components/admin/invites-list.tsx apps/web/src/components/admin/account-dialog.tsx apps/web/src/components/admin/user-edit-dialog.tsx apps/web/src/components/admin/department-role-dialog.tsx apps/web/src/components/admin/invite-dialog.tsx apps/web/src/components/admin/create-invite-form.tsx apps/web/src/components/admin/transfer-ownership-dialog.tsx` returns no results
2. `npx tsc --noEmit` passes
</verification>

<success_criteria>
- All 10 admin core files have zero hardcoded gray-* classes
- Tables use semantic tokens with monospace data columns
- Dialogs use semantic tokens for all form elements
- Status indicators use theme-harmonized colors
- No functional regressions in table sorting, dialog opening/closing, form submission
</success_criteria>

<output>
After completion, create `.planning/phases/25-component-color-migration/25-03-SUMMARY.md`
</output>
