---
phase: 25-component-color-migration
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/bookkeeping/records-table.tsx
  - apps/web/src/components/bookkeeping/add-record-dialog.tsx
  - apps/web/src/components/bookkeeping/record-row.tsx
  - apps/web/src/components/bookkeeping/add-record-form.tsx
  - apps/web/src/components/bookkeeping/skeleton-row.tsx
  - apps/web/src/components/bookkeeping/keyboard-shortcuts-modal.tsx
  - apps/web/src/components/bookkeeping/virtualized-records-list.tsx
  - apps/web/src/components/bookkeeping/bookkeeping-content.tsx
  - apps/web/src/components/bookkeeping/result-summary.tsx
  - apps/web/src/components/bookkeeping/records-toolbar.tsx
  - apps/web/src/components/bookkeeping/account-selector.tsx
autonomous: true

must_haves:
  truths:
    - "All bookkeeping components render with correct colors in all 4 themes (Midnight, Dawn, Slate, Carbon)"
    - "No hardcoded gray-* classes remain in any bookkeeping component file"
    - "Data values (order IDs, monetary amounts, dates, counts) display in monospace font with subtle background pill"
    - "Table data columns (Order ID, Amount) use monospace for both header and cells"
    - "Interactive hover states are visually distinct from resting states"
  artifacts:
    - path: "apps/web/src/components/bookkeeping/records-table.tsx"
      provides: "Migrated order tracking table with monospace data columns"
    - path: "apps/web/src/components/bookkeeping/record-row.tsx"
      provides: "Migrated table row with monospace data values and semantic colors"
    - path: "apps/web/src/components/bookkeeping/add-record-form.tsx"
      provides: "Migrated form with semantic token colors"
  key_links:
    - from: "records-table.tsx"
      to: "globals.css semantic tokens"
      via: "Tailwind utility classes"
      pattern: "text-foreground|text-muted-foreground|bg-muted|border-border|hover:bg-accent"
---

<objective>
Migrate all 11 bookkeeping component files from hardcoded gray-* Tailwind classes to semantic color tokens, and apply monospace data formatting with background pills to all data values.

Purpose: Bookkeeping (order tracking) is the most-used view in the application. Migrating it first ensures the highest-visibility components are theme-aware. This plan also establishes the monospace data formatting pattern that other plans will follow.
Output: 11 bookkeeping component files fully migrated to semantic tokens with monospace data values.
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/25-component-color-migration/25-CONTEXT.md
@.planning/phases/25-component-color-migration/25-RESEARCH.md
@apps/web/src/app/globals.css
@apps/web/src/components/layout/page-header.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate high-count bookkeeping files to semantic tokens</name>
  <files>
    apps/web/src/components/bookkeeping/records-table.tsx
    apps/web/src/components/bookkeeping/add-record-dialog.tsx
    apps/web/src/components/bookkeeping/record-row.tsx
    apps/web/src/components/bookkeeping/add-record-form.tsx
  </files>
  <action>
    Migrate all hardcoded gray-* classes to semantic tokens in these 4 files (~124 occurrences total). Apply these mappings contextually (not blindly):

    **Text colors:**
    - `text-gray-900`, `text-gray-950` → `text-foreground` (primary text: headings, labels, values)
    - `text-gray-700`, `text-gray-600`, `text-gray-500` → `text-muted-foreground` (secondary text: descriptions, hints, timestamps)
    - `text-gray-400`, `text-gray-300` → `text-muted-foreground/70` (tertiary: placeholders, disabled)
    - `text-white` on dark backgrounds → keep or use `text-primary-foreground` if on primary bg

    **Background colors:**
    - `bg-gray-50`, `bg-gray-100` → `bg-muted` (subtle backgrounds, table headers)
    - `bg-gray-800`, `bg-gray-900` → `bg-card` (elevated dark surfaces)
    - `bg-white` → `bg-background` or `bg-card` depending on elevation
    - `hover:bg-gray-50`, `hover:bg-gray-100` → `hover:bg-accent` (interactive states)
    - Table row hover → `hover:bg-table-row-hover` (custom token already defined)

    **Border colors:**
    - `border-gray-200`, `border-gray-300` → `border-border`
    - `divide-gray-200` → `divide-border`

    **Ring/Focus:**
    - `ring-gray-*`, `focus:ring-gray-*` → `ring-ring`

    **Strikethrough text pattern:**
    - `text-gray-500` in strikethrough context → `text-muted-foreground/70`

    Also apply monospace data formatting in records-table.tsx and record-row.tsx:
    - Order IDs, eBay order IDs: wrap in `<span className="font-mono text-sm px-1.5 py-0.5 rounded bg-primary/10">`
    - Monetary values (sale price, cost, profit): same monospace pill treatment
    - Date values: `font-mono text-sm` (pill optional for dates - use discretion)
    - Table headers for data columns: add `font-mono` class to TableHead for Order ID, Amount columns
    - Right-align numeric columns with `text-right`

    **DO NOT:**
    - Create new CSS variables or tokens — use only existing ones from globals.css
    - Mix gray-* and semantic tokens in the same component — migrate completely
    - Apply font-mono to labels, headings, or descriptive text — only data values
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/bookkeeping/records-table.tsx apps/web/src/components/bookkeeping/add-record-dialog.tsx apps/web/src/components/bookkeeping/record-row.tsx apps/web/src/components/bookkeeping/add-record-form.tsx`
    All counts should be 0.
    Run: `grep -c "font-mono" apps/web/src/components/bookkeeping/records-table.tsx apps/web/src/components/bookkeeping/record-row.tsx`
    Both should show multiple matches (data values formatted).
  </verify>
  <done>Zero gray-* classes in all 4 files. Data values in records-table and record-row use monospace with background pills. Table data column headers use font-mono.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate remaining bookkeeping files and apply monospace formatting</name>
  <files>
    apps/web/src/components/bookkeeping/skeleton-row.tsx
    apps/web/src/components/bookkeeping/keyboard-shortcuts-modal.tsx
    apps/web/src/components/bookkeeping/virtualized-records-list.tsx
    apps/web/src/components/bookkeeping/bookkeeping-content.tsx
    apps/web/src/components/bookkeeping/result-summary.tsx
    apps/web/src/components/bookkeeping/records-toolbar.tsx
    apps/web/src/components/bookkeeping/account-selector.tsx
  </files>
  <action>
    Migrate all hardcoded gray-* classes to semantic tokens in these 7 files (~28 occurrences total). Apply the same mapping rules from Task 1.

    Special considerations:
    - **skeleton-row.tsx** (~13 occurrences): Skeleton loading states should use `bg-muted` and `animate-pulse` — these represent content placeholders
    - **keyboard-shortcuts-modal.tsx** (~5 occurrences): Keyboard shortcut key indicators (like Ctrl, Shift, etc.) should use `bg-muted text-muted-foreground font-mono` for the key badges
    - **result-summary.tsx** (~1 occurrence): Summary counts/numbers get monospace pill treatment if they display data values
    - **records-toolbar.tsx** (~1 occurrence): Minimal migration, likely a border or text color
    - **account-selector.tsx** (~1 occurrence): Minimal migration
    - **bookkeeping-content.tsx** (~3 occurrences): Container/wrapper — likely bg and border colors
    - **virtualized-records-list.tsx** (~4 occurrences): Virtual list wrapper — migrate bg/border colors, ensure scrollbar tokens are preserved

    Apply monospace data formatting to any data values found in result-summary.tsx (counts, totals).

    **DO NOT:**
    - Break skeleton animation styling
    - Remove any existing `animate-pulse` or loading state classes
    - Change the virtualization-related classes (height, overflow, position)
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/bookkeeping/skeleton-row.tsx apps/web/src/components/bookkeeping/keyboard-shortcuts-modal.tsx apps/web/src/components/bookkeeping/virtualized-records-list.tsx apps/web/src/components/bookkeeping/bookkeeping-content.tsx apps/web/src/components/bookkeeping/result-summary.tsx apps/web/src/components/bookkeeping/records-toolbar.tsx apps/web/src/components/bookkeeping/account-selector.tsx`
    All counts should be 0.
    Run: `grep -rn "gray-" apps/web/src/components/bookkeeping/`
    Should return no results (entire bookkeeping directory is gray-free).
  </verify>
  <done>Zero gray-* classes in entire bookkeeping directory. All 11 files use semantic tokens exclusively. Skeleton animations preserved. Keyboard shortcut keys styled with monospace.</done>
</task>

</tasks>

<verification>
1. `grep -rn "gray-" apps/web/src/components/bookkeeping/` returns no results
2. `grep -c "font-mono" apps/web/src/components/bookkeeping/records-table.tsx` shows >= 3 matches (data columns)
3. `grep -c "bg-primary/10" apps/web/src/components/bookkeeping/record-row.tsx` shows >= 1 match (monospace pills)
4. `npm run build` completes without errors (or `npx tsc --noEmit` for type checking)
</verification>

<success_criteria>
- All 11 bookkeeping component files have zero hardcoded gray-* classes
- Semantic tokens used correctly: text-foreground for primary, text-muted-foreground for secondary, bg-muted for subtle backgrounds, border-border for borders, hover:bg-accent for interactive states
- Data values (order IDs, amounts, dates) use font-mono with bg-primary/10 pill styling
- Table data column headers include font-mono class
- No functional regressions (skeleton animations, virtualization, keyboard shortcuts all still work)
</success_criteria>

<output>
After completion, create `.planning/phases/25-component-color-migration/25-01-SUMMARY.md`
</output>
