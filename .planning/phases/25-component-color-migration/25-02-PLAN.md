---
phase: 25-component-color-migration
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - apps/web/src/components/data-management/column-mapper.tsx
  - apps/web/src/components/data-management/import-dialog.tsx
  - apps/web/src/components/data-management/import-history.tsx
  - apps/web/src/components/data-management/import-preview.tsx
  - apps/web/src/components/data-management/export-progress.tsx
  - apps/web/src/components/data-management/export-dialog.tsx
  - apps/web/src/components/ui/alert-dialog.tsx
  - apps/web/src/components/ui/checkbox.tsx
  - apps/web/src/components/ui/slider.tsx
  - apps/web/src/components/ui/tooltip.tsx
  - apps/web/src/lib/themes.ts
autonomous: true

must_haves:
  truths:
    - "All data management components render with correct colors in all 4 themes"
    - "No hardcoded gray-* classes remain in any data-management or migrated UI component file"
    - "Import preview data values display in monospace font with background pills"
    - "UI primitives (alert-dialog, checkbox, slider, tooltip) are theme-aware"
  artifacts:
    - path: "apps/web/src/components/data-management/column-mapper.tsx"
      provides: "Migrated column mapping UI with semantic colors"
    - path: "apps/web/src/components/data-management/import-preview.tsx"
      provides: "Migrated import preview with monospace data formatting"
  key_links:
    - from: "data-management/*.tsx"
      to: "globals.css semantic tokens"
      via: "Tailwind utility classes"
      pattern: "text-foreground|text-muted-foreground|bg-muted|border-border"
---

<objective>
Migrate all 6 data management component files and 4 UI primitive files from hardcoded gray-* classes to semantic tokens, plus update themes.ts if needed.

Purpose: Data management components (import/export) handle tabular data display and are the second-most data-dense views. UI primitives affect every component that uses them, so migrating them ensures consistent theming at the foundation level.
Output: 11 files fully migrated to semantic tokens.
</objective>

<execution_context>
@C:\Users\User\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\User\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/25-component-color-migration/25-CONTEXT.md
@.planning/phases/25-component-color-migration/25-RESEARCH.md
@apps/web/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate data management components to semantic tokens</name>
  <files>
    apps/web/src/components/data-management/column-mapper.tsx
    apps/web/src/components/data-management/import-dialog.tsx
    apps/web/src/components/data-management/import-history.tsx
    apps/web/src/components/data-management/import-preview.tsx
    apps/web/src/components/data-management/export-progress.tsx
    apps/web/src/components/data-management/export-dialog.tsx
  </files>
  <action>
    Migrate all hardcoded gray-* classes to semantic tokens in these 6 files (~44 occurrences total).

    Apply standard mappings:
    - `text-gray-900/950` → `text-foreground`
    - `text-gray-600/500/400` → `text-muted-foreground`
    - `bg-gray-50/100` → `bg-muted`
    - `bg-gray-800/900` → `bg-card`
    - `border-gray-200/300` → `border-border`
    - `hover:bg-gray-50/100` → `hover:bg-accent`
    - `divide-gray-*` → `divide-border`

    Special considerations:
    - **column-mapper.tsx** (~12 occurrences): Column mapping dropdown items likely have hover states — use `hover:bg-accent`. Source/target column labels may need `text-muted-foreground` vs `text-foreground` distinction.
    - **import-dialog.tsx** (~11 occurrences): File upload area borders, step indicators, and status text
    - **import-history.tsx** (~9 occurrences): History list with timestamps and status — timestamps get `font-mono text-sm`, status values may use existing Badge component
    - **import-preview.tsx** (~6 occurrences): Preview table showing data — apply monospace pills to data values in preview cells. The existing `<code className="font-mono text-sm">` pattern should be enhanced to `<code className="font-mono text-sm px-1.5 py-0.5 rounded bg-primary/10">`
    - **export-progress.tsx** (~3 occurrences): Progress indicator — likely bg colors for progress bar sections
    - **export-dialog.tsx** (~3 occurrences): Export configuration form

    Apply monospace data formatting:
    - import-preview.tsx: Data values in preview table cells get monospace pills
    - import-history.tsx: Dates, record counts, file names get font-mono
    - export-progress.tsx: Count/percentage values get font-mono

    **DO NOT:**
    - Break file upload drag-and-drop styling
    - Remove progress bar animation classes
    - Over-apply monospace to descriptive text in import/export dialogs
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/data-management/*.tsx`
    All counts should be 0.
    Run: `grep -c "font-mono" apps/web/src/components/data-management/import-preview.tsx`
    Should show >= 1 match.
  </verify>
  <done>Zero gray-* classes in all 6 data management files. Import preview uses monospace for data values. History timestamps use monospace.</done>
</task>

<task type="auto">
  <name>Task 2: Migrate UI primitives and themes.ts</name>
  <files>
    apps/web/src/components/ui/alert-dialog.tsx
    apps/web/src/components/ui/checkbox.tsx
    apps/web/src/components/ui/slider.tsx
    apps/web/src/components/ui/tooltip.tsx
    apps/web/src/lib/themes.ts
  </files>
  <action>
    Migrate hardcoded gray-* classes to semantic tokens in these 5 files (~8 occurrences total).

    These are shadcn/ui primitives — changes here ripple to every component that uses them. Be precise:

    - **alert-dialog.tsx** (~3 occurrences): Overlay bg, button variants, or text colors. Use `bg-background`, `text-foreground`, `text-muted-foreground` as appropriate. Check if overlay uses gray — if so, keep it as-is or use `bg-background/80` for backdrop.
    - **checkbox.tsx** (~1 occurrence): Likely a border or checked state color. Use `border-primary` for checked, `border-input` for unchecked.
    - **slider.tsx** (~2 occurrences): Track and thumb colors. Track bg should be `bg-secondary`, active range should be `bg-primary`. Thumb border if gray should be `border-border`.
    - **tooltip.tsx** (~1 occurrence): Tooltip background or text. Use `bg-popover text-popover-foreground` for tooltip content.
    - **themes.ts** (~1 occurrence): Check context — if this is preview/metadata color, it may need to stay hardcoded for preview cards (per Phase 23 decision: "Hardcoded hex preview colors in theme metadata"). Only migrate if it's a runtime UI color, not a preview value.

    **CRITICAL:** Read each file carefully before editing. These are foundational components. A wrong token choice here affects the entire application. If a gray-* class is intentionally providing contrast against a semantic token (e.g., a focus ring on a primary background), preserve that intent with the correct semantic alternative.

    **DO NOT:**
    - Change component API or props
    - Add new variants
    - Modify animation or transition classes
    - Change themes.ts preview/metadata colors if they're hardcoded hex values for theme preview cards
  </action>
  <verify>
    Run: `grep -c "gray-" apps/web/src/components/ui/alert-dialog.tsx apps/web/src/components/ui/checkbox.tsx apps/web/src/components/ui/slider.tsx apps/web/src/components/ui/tooltip.tsx apps/web/src/lib/themes.ts`
    All counts should be 0 (or themes.ts may keep 1 if it's a preview hex value).
  </verify>
  <done>UI primitives use semantic tokens exclusively. themes.ts migrated where appropriate (preview hex values preserved if intentionally hardcoded).</done>
</task>

</tasks>

<verification>
1. `grep -rn "gray-" apps/web/src/components/data-management/` returns no results
2. `grep -c "gray-" apps/web/src/components/ui/alert-dialog.tsx apps/web/src/components/ui/checkbox.tsx apps/web/src/components/ui/slider.tsx apps/web/src/components/ui/tooltip.tsx` — all 0
3. `npx tsc --noEmit` passes without errors
</verification>

<success_criteria>
- All 6 data management files have zero hardcoded gray-* classes
- All 4 UI primitive files have zero hardcoded gray-* classes (or justified exceptions)
- themes.ts appropriately handled (preview colors preserved, runtime colors migrated)
- Data values in import-preview use monospace with pill styling
- No functional regressions in dialog, checkbox, slider, or tooltip behavior
</success_criteria>

<output>
After completion, create `.planning/phases/25-component-color-migration/25-02-SUMMARY.md`
</output>
