---
phase: 30-consistent-skeletons-empty-states
plan: 04
type: execute
wave: 2
depends_on: ["30-01", "30-02"]
files_modified:
  - apps/web/src/components/admin/automation/pairing-requests-table.tsx
  - apps/web/src/components/admin/collection/history-panel.tsx
  - apps/web/src/components/admin/collection/schedule-config.tsx
  - apps/web/src/components/admin/collection/sellers-grid.tsx
autonomous: true

must_haves:
  truths:
    - "Pairing requests table shows FirstTimeEmpty illustration instead of plain text 'No pending pairing requests'"
    - "History panel shows FirstTimeEmpty illustration instead of plain text 'No activity yet'"
    - "Schedule config shows ErrorEmpty illustration instead of plain text 'Unable to load schedule'"
    - "Sellers grid shows FirstTimeEmpty or NoResults illustration instead of plain text empty states"
  artifacts:
    - path: "apps/web/src/components/admin/automation/pairing-requests-table.tsx"
      provides: "Pairing requests with FirstTimeEmpty empty state"
      contains: "FirstTimeEmpty"
    - path: "apps/web/src/components/admin/collection/history-panel.tsx"
      provides: "History panel with FirstTimeEmpty empty state"
      contains: "FirstTimeEmpty"
    - path: "apps/web/src/components/admin/collection/schedule-config.tsx"
      provides: "Schedule config with ErrorEmpty error state"
      contains: "ErrorEmpty"
    - path: "apps/web/src/components/admin/collection/sellers-grid.tsx"
      provides: "Sellers grid with illustrated empty states"
      contains: "FirstTimeEmpty|NoResults"
  key_links:
    - from: "pairing-requests-table.tsx"
      to: "components/empty-states/first-time-empty.tsx"
      via: "import and render"
      pattern: "import.*FirstTimeEmpty"
    - from: "schedule-config.tsx"
      to: "components/empty-states/error-empty.tsx"
      via: "import and render"
      pattern: "import.*ErrorEmpty"
    - from: "sellers-grid.tsx"
      to: "components/empty-states/first-time-empty.tsx"
      via: "import and render"
      pattern: "import.*FirstTimeEmpty"
---

<objective>
Standardize empty state illustrations across collection and automation pages, replacing plain text "No data" messages with SVG-illustrated empty state components.

Purpose: Users seeing plain text empty states ("No pending pairing requests", "No activity yet", "Unable to load schedule") get no visual context. The existing FirstTimeEmpty, NoResults, and ErrorEmpty components provide consistent SVG illustrations with contextual messaging and optional CTAs. This plan wires them into the remaining gaps.
Output: 4 files updated with illustrated empty state components replacing plain text.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/milestones/v5-ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-consistent-skeletons-empty-states/30-RESEARCH.md
@apps/web/src/components/empty-states/first-time-empty.tsx
@apps/web/src/components/empty-states/error-empty.tsx
@apps/web/src/components/empty-states/no-results.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wire FirstTimeEmpty into pairing requests and history panel</name>
  <files>
    apps/web/src/components/admin/automation/pairing-requests-table.tsx
    apps/web/src/components/admin/collection/history-panel.tsx
  </files>
  <action>
**File 1: `apps/web/src/components/admin/automation/pairing-requests-table.tsx`**

Add import at top:
```typescript
import { FirstTimeEmpty } from "@/components/empty-states/first-time-empty"
```

Replace lines 209-214 (the empty state branch inside TableBody):
```typescript
// BEFORE (lines 209-214):
) : !requests || requests.length === 0 ? (
  <TableRow>
    <TableCell colSpan={5} className="text-center text-muted-foreground py-8">
      No pending pairing requests
    </TableCell>
  </TableRow>
)

// AFTER:
) : !requests || requests.length === 0 ? (
  <TableRow>
    <TableCell colSpan={5} className="py-8">
      <FirstTimeEmpty
        entityName="pairing requests"
        description="No Chrome Extensions are waiting to be paired."
      />
    </TableCell>
  </TableRow>
)
```

**File 2: `apps/web/src/components/admin/collection/history-panel.tsx`**

Add import at top:
```typescript
import { FirstTimeEmpty } from "@/components/empty-states/first-time-empty"
```

Replace lines 220-221 (the empty entries branch):
```typescript
// BEFORE (lines 220-221):
) : entries.length === 0 ? (
  <div className="text-muted-foreground text-sm">No activity yet</div>
)

// AFTER:
) : entries.length === 0 ? (
  <div className="flex items-center justify-center h-full">
    <FirstTimeEmpty
      entityName="history entries"
      description="Run a collection or add sellers to see activity here."
      actionLabel="Start Collection"
      onAction={onStartRunClick}
    />
  </div>
)
```

This uses the existing `onStartRunClick` prop to provide a CTA that takes the user directly to starting a collection run.
  </action>
  <verify>
1. Grep `pairing-requests-table.tsx` for "No pending pairing requests" -- should find ZERO matches
2. Grep `history-panel.tsx` for "No activity yet" -- should find ZERO matches
3. Grep both files for "FirstTimeEmpty" -- should find import and usage
  </verify>
  <done>
- Pairing requests table shows EmptyBoxIllustration SVG with "No pairing requests yet" heading
- History panel shows EmptyBoxIllustration SVG with "No history entries yet" heading and "Start Collection" CTA
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire ErrorEmpty into schedule config and illustrated empty states into sellers grid</name>
  <files>
    apps/web/src/components/admin/collection/schedule-config.tsx
    apps/web/src/components/admin/collection/sellers-grid.tsx
  </files>
  <action>
**File 1: `apps/web/src/components/admin/collection/schedule-config.tsx`**

Add import at top:
```typescript
import { ErrorEmpty } from "@/components/empty-states/error-empty"
```

Replace lines 153-155 (the error state after loading):
```typescript
// BEFORE (lines 153-155):
if (!schedule) {
  return <div className="text-muted-foreground">Unable to load schedule</div>;
}

// AFTER:
if (!schedule) {
  return (
    <Card className="bg-card border-border">
      <CardContent className="py-8">
        <ErrorEmpty
          message="Unable to load schedule configuration. The server may be unavailable."
          onRetry={fetchData}
        />
      </CardContent>
    </Card>
  );
}
```

This wraps the error in a Card to match the component's normal layout, and provides a retry action using the existing `fetchData` callback.

**File 2: `apps/web/src/components/admin/collection/sellers-grid.tsx`**

Add imports at top:
```typescript
import { FirstTimeEmpty } from "@/components/empty-states/first-time-empty"
import { NoResults } from "@/components/empty-states/no-results"
```

Replace lines 1373-1378 (the empty state block inside the grid area):
```typescript
// BEFORE (lines 1373-1378):
{filteredSellers.length === 0 ? (
  <div className="flex items-center justify-center h-full text-muted-foreground">
    {totalCount === 0
      ? "No sellers yet. Add one above or run a collection."
      : "No sellers match your search."}
  </div>
)

// AFTER:
{filteredSellers.length === 0 ? (
  <div className="flex items-center justify-center h-full">
    {totalCount === 0 ? (
      <FirstTimeEmpty
        entityName="sellers"
        description="Add sellers above or run a collection to get started."
      />
    ) : (
      <NoResults
        searchTerm={debouncedSearch || undefined}
      />
    )}
  </div>
)
```

This provides:
- `FirstTimeEmpty` when there are genuinely no sellers (totalCount === 0)
- `NoResults` when sellers exist but the search/filter matches none, with the current search term displayed

Note: Check that `debouncedSearch` is accessible in scope at this point. It is defined at line 221-224. If the search input value is stored differently, adapt accordingly. The variable `newSellerName` is used as both search and add input, and `debouncedSearch` is the debounced version used for filtering.
  </action>
  <verify>
1. Grep `schedule-config.tsx` for "Unable to load schedule" -- should find ZERO matches
2. Grep `sellers-grid.tsx` for "No sellers yet\|No sellers match" -- should find ZERO matches
3. Grep `schedule-config.tsx` for "ErrorEmpty" -- should find import and usage
4. Grep `sellers-grid.tsx` for "FirstTimeEmpty\|NoResults" -- should find import and usage
5. Run `cd /mnt/c/Users/User/Downloads/GitRepos/DS-ProSolution/apps/web && npx tsc --noEmit` to verify no type errors
  </verify>
  <done>
- Schedule config shows ErrorIllustration SVG with "Something went wrong" heading and "Try Again" retry button
- Sellers grid shows EmptyBoxIllustration when no sellers exist
- Sellers grid shows SearchIllustration when search has no matches
  </done>
</task>

</tasks>

<verification>
After all tasks complete:
1. `grep -rn "No pending pairing\|No activity yet\|Unable to load schedule\|No sellers yet\|No sellers match" apps/web/src/components/admin/automation/pairing-requests-table.tsx apps/web/src/components/admin/collection/history-panel.tsx apps/web/src/components/admin/collection/schedule-config.tsx apps/web/src/components/admin/collection/sellers-grid.tsx` returns empty
2. TypeScript compiles without errors
3. All files import from `@/components/empty-states/`
4. Full application grep: `grep -rn '"Loading\.\.\."' apps/web/src/app/ apps/web/src/components/` should only find:
   - `account-dialog.tsx` line 476 (delete button - intentionally kept)
   - Any deprecated components not in active use
</verification>

<success_criteria>
- All 4 plain-text empty states replaced with illustrated empty state components
- Pairing requests: FirstTimeEmpty with custom description
- History panel: FirstTimeEmpty with CTA button to start collection
- Schedule config: ErrorEmpty with retry action
- Sellers grid: FirstTimeEmpty for no sellers, NoResults for no search matches
- No TypeScript compilation errors
- SKEL-02 fully satisfied (SVG empty states standardized across collection, bookkeeping, and admin pages)
</success_criteria>

<output>
After completion, create `.planning/phases/30-consistent-skeletons-empty-states/30-04-SUMMARY.md`
</output>
